# 워크트리 문서 구조 표준화 제안

## 배경

여러 워크트리에서 작업할 때 문서와 스크립트의 구조가 일관되지 않으면:
- 다른 워크트리로 전환 시 혼란
- 병합 시 충돌 가능성
- 문서 찾기 어려움
- 새로운 워크트리 생성 시 구조 결정 어려움

## 제안하는 표준 구조

### 디렉터리 구조

```
<worktree_root>/
  docs/
    <worktree_name>/
      <worktree_name>.md              # 메인 기능 문서
      TEST_INSTRUCTIONS.md             # 테스트 가이드
      devlog.md                        # 개발 로그
      [STANDARDIZATION_PROPOSAL.md]    # 표준화 제안 (선택적)
  scripts/
    <worktree_name>/
      test_<worktree_name>.R           # 테스트 스크립트
      [기타 스크립트들]
```

### 예시: LDS 워크트리

```
_wt/lds/
  docs/
    lds/
      lds.md
      TEST_INSTRUCTIONS.md
      devlog.md
      STANDARDIZATION_PROPOSAL.md
  scripts/
    lds/
      test_lds.R
```

### 예시: Milo 워크트리

```
_wt/milo/
  docs/
    milo/
      milo.md
      TEST_INSTRUCTIONS.md
      devlog.md
  scripts/
    milo/
      test_milo.R
```

## 문서 작성 가이드

### 1. 메인 문서 (`<name>.md`)

**목적**: 기능의 상세 설명 및 사용법

**필수 섹션**:
- 개요
- 핵심 개념
- 주요 함수
- 파라미터 설명
- 사용 예시
- 주의사항
- 문제 해결
- 참고 자료

**예시**: `milo.md`, `pt_umap.md`, `lds.md`

### 2. 테스트 가이드 (`TEST_INSTRUCTIONS.md`)

**목적**: 실제 데이터로 테스트하는 방법

**필수 섹션**:
- 환경 설정
- 데이터 준비
- 테스트 실행 방법
- 결과 확인 및 저장
- 문제 해결
- 다음 단계

**예시**: `docs/wt_test_general/TEST_INSTRUCTIONS.md`

### 3. 개발 로그 (`devlog.md`)

**목적**: 개발 과정 기록 및 컨텍스트 보존

**필수 섹션**:
- 날짜별 작업 기록
- 완료된 작업
- 다음 단계
- 이슈 및 해결 방법

**형식**:
```markdown
## YYYY-MM-DD: 작업 제목

### 목표
- 목표 1
- 목표 2

### 완료된 작업
- 작업 1
- 작업 2

### 다음 단계
- 단계 1
- 단계 2
```

## 스크립트 구조

### 테스트 스크립트 (`test_<name>.R`)

**필수 섹션**:
1. 환경 설정 (패키지 로드)
2. 데이터 로드
3. 메타데이터 확인
4. 데이터 전처리
5. 테스트 실행
6. 결과 저장
7. 요약

**예시 구조**:
```r
# ============================================================================
# 환경 설정
# ============================================================================
# 패키지 로드
# 함수 확인

# ============================================================================
# 데이터 로드
# ============================================================================
# 데이터 경로 확인
# 데이터 로드

# ============================================================================
# 테스트 실행
# ============================================================================
# 테스트 1: 기본 테스트
# 테스트 2: 옵션 테스트

# ============================================================================
# 결과 저장
# ============================================================================
# 결과 저장
# 요약
```

## 공통 규칙

### 파일 경로

- **데이터**: `/data/user3/sobj/`
- **결과 저장**: `/data/user3/sobj/`
- **R 세션 시작**: `/home/user3/GJC_KDW_250721`
- **패키지 경로**: `/home/user3/data_user3/git_repo/mylit/myR`

### 파일 형식

- **큰 객체**: `.qs` (qs 패키지)
- **표 데이터**: `.csv`
- **문서**: `.md` (Markdown)

### 네이밍 규칙

- **디렉터리**: 소문자, 하이픈 사용 가능 (`lds`, `plot-dev`)
- **파일**: 소문자, 언더스코어 사용 (`test_lds.R`, `TEST_INSTRUCTIONS.md`)
- **함수**: 카멜케이스 또는 스네이크케이스 (일관성 유지)

## 기존 워크트리 마이그레이션

### 현재 상태

- `docs/plot-dev/`: `devlog.md`, `TESTING.md` 존재
- `docs/wt_test_general/`: `TEST_INSTRUCTIONS.md` 존재
- `myR/docs/milo.md`: 루트에 위치

### 제안

1. **점진적 마이그레이션**: 새 워크트리부터 표준 구조 적용
2. **기존 워크트리**: 필요시 리팩토링 (우선순위 낮음)
3. **공통 문서**: `docs/wt_test_general/` 유지 (여러 워크트리에서 공유)

## 장점

1. **일관성**: 모든 워크트리에서 동일한 구조
2. **찾기 쉬움**: 예측 가능한 위치
3. **병합 용이**: 충돌 최소화
4. **온보딩**: 새로운 워크트리 생성 시 템플릿 사용 가능
5. **유지보수**: 구조가 명확하여 유지보수 용이

## 구현 체크리스트

새 워크트리 생성 시:

- [ ] `docs/<name>/` 디렉터리 생성
- [ ] `<name>.md` 작성
- [ ] `TEST_INSTRUCTIONS.md` 작성
- [ ] `devlog.md` 작성
- [ ] `scripts/<name>/` 디렉터리 생성
- [ ] `test_<name>.R` 작성
- [ ] 표준 구조 준수 확인

## 예시: LDS 워크트리

```
_wt/lds/
  docs/
    lds/
      lds.md                          ✓
      TEST_INSTRUCTIONS.md             ✓
      devlog.md                       ✓
      STANDARDIZATION_PROPOSAL.md     ✓ (본 문서)
  scripts/
    lds/
      test_lds.R                      ✓
```

## 피드백 및 개선

이 제안은 초안이며, 실제 사용 경험을 바탕으로 개선될 수 있습니다.

개선 제안이 있으면 `devlog.md`에 기록하거나 이 문서를 업데이트하세요.

