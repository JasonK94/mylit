% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_aggregation.R
\name{.aggregate_cells}
\alias{.aggregate_cells}
\title{Aggregate Cells by Grouping Variables}
\usage{
.aggregate_cells(plot_df, features, group_vars, fun = "mean", min_cells = 1)
}
\arguments{
\item{plot_df}{data.frame with cell-level data}

\item{features}{Character vector of features to aggregate}

\item{group_vars}{Character vector of grouping variables, in order of aggregation.
Example: c("patient", "cell_type") aggregates by patient first, then by cell_type.}

\item{fun}{Character. Aggregation function: "mean" (default), "sum", "median", "count"}

\item{min_cells}{Integer. Minimum number of cells per group (default: 1)}
}
\value{
data.frame with aggregated data
}
\description{
Aggregates cell-level data by specified grouping variables.
Supports multiple levels of aggregation (e.g., patient -> group).
}
\examples{
\dontrun{
# Aggregate by patient
agg_df <- .aggregate_cells(plot_df, features = c("CD3D", "CD4"), group_vars = "patient")

# Multi-level aggregation: patient -> cell_type
agg_df <- .aggregate_cells(plot_df, features = "CD3D", group_vars = c("patient", "cell_type"))
}

}
\keyword{internal}
