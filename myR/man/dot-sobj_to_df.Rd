% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_data.R
\name{.sobj_to_df}
\alias{.sobj_to_df}
\title{Convert Seurat Object to Dataframe}
\usage{
.sobj_to_df(
  sobj,
  features = NULL,
  assay = NULL,
  layer = "data",
  metadata_only = FALSE,
  add_cell_id = TRUE,
  metadata_df = NULL,
  match_id = NULL
)
}
\arguments{
\item{sobj}{Seurat object}

\item{features}{Character vector of features to extract. Can include:
\itemize{
\item Gene names (from assay)
\item Metadata column names
\item If NULL, returns only metadata
}}

\item{assay}{Character. Assay to use (default: DefaultAssay(sobj))}

\item{layer}{Character. Layer to use ("counts", "data", "scale.data")}

\item{metadata_only}{Logical. If TRUE, only return metadata without expression}

\item{add_cell_id}{Logical. If TRUE, add cell IDs as a column (default: TRUE)}

\item{metadata_df}{Optional data.frame. Additional metadata to join.
Must have rownames or a column matching cell IDs.}

\item{match_id}{Character. Column name in metadata_df to match with cell IDs.
If NULL, uses rownames of metadata_df.}
}
\value{
data.frame with cells as rows and features + metadata as columns
}
\description{
Converts a Seurat object to a dataframe by combining expression data
and metadata. Supports flexible feature selection from both assays and metadata.
}
\examples{
\dontrun{
# Basic conversion
df <- .sobj_to_df(sobj, features = c("CD3D", "CD4", "nFeature_RNA"))

# With additional metadata
extra_meta <- data.frame(cell_id = colnames(sobj), new_var = rnorm(ncol(sobj)))
df <- .sobj_to_df(sobj, features = "CD3D", metadata_df = extra_meta, match_id = "cell_id")
}

}
\keyword{internal}
