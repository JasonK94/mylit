#!/bin/bash
# ============================================================================
# 전체 파이프라인 테스트 실행 스크립트
# ============================================================================

echo "=================================================================================="
echo "Multi-Model DEG Consensus Engine - 전체 파이프라인 테스트"
echo "=================================================================================="
echo ""

# R 세션 시작 및 테스트 실행
R --slave --no-restore << 'RSCRIPT'
# 전체 파이프라인 테스트 실행
source("/home/user3/data_user3/git_repo/_wt/deg-consensus/scripts/test_step_by_step.R")
RSCRIPT

EXIT_CODE=$?

if [ $EXIT_CODE -eq 0 ]; then
    echo ""
    echo "=================================================================================="
    echo "테스트 성공적으로 완료"
    echo "=================================================================================="
    echo "결과 파일 확인:"
    ls -lh /data/user3/sobj/test_deg_consensus*.qs 2>/dev/null || echo "  (결과 파일 없음)"
else
    echo ""
    echo "=================================================================================="
    echo "테스트 실패 (Exit code: $EXIT_CODE)"
    echo "=================================================================================="
fi

exit $EXIT_CODE

